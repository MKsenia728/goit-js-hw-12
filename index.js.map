{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nexport const getPhoto = (query, page, perPage) => {\n  axios.defaults.baseURL = 'https://pixabay.com/api/';\n  \n  return axios.get('', {params : {    \n    key : '48288328-1d3de9be04bab144528bc8ac3',\n    q : query,\n    per_page : perPage,\n    page : page,\n    image_type : 'photo',\n    orientation : 'horizontal',\n    safesearch : true,}});\n};","export const createGalleryElement = ({\n  webformatURL: smallImg,\n  largeImageURL: largeImg,\n  tags: alt,\n  likes,\n  views,\n  comments,\n  downloads,\n}) => {\n  return `<li class=\"gallery-item\">\n       <a class=\"gallery-link\" href=${largeImg}>\n         <img\n          class=\"gallery-image\"\n          src=${smallImg}\n          alt=${alt}\n         />\n        </a>\n        <ul class=\"info-list\">\n           <li class=\"info-list-item\">\n             <span class=\"info-list-item-title\">Likes</span>\n             <span class=\"info-list-item-data\">${likes}</span>\n           </li>\n           <li class=\"info-list-item\">\n             <span class=\"info-list-item-title\">Views</span>\n             <span class=\"info-list-item-data\">${views}</span>\n           </li>\n           <li class=\"info-list-item\">\n             <span class=\"info-list-item-title\">Comments</span>\n             <span class=\"info-list-item-data\">${comments}</span>\n           </li>\n           <li class=\"info-list-item\">\n             <span class=\"info-list-item-title\">Downloads</span>\n             <span class=\"info-list-item-data\">${downloads}</span>\n           </li>\n         </ul>\n     </li>`;\n};\n\nexport const createLoader = () => {\n  const loaderEl = document.createElement('p');\n  loaderEl.classList.add('loader');\n  loaderEl.innerHTML = 'Loading images, please wait...</p>';\n  loaderEl.style.textAlign = 'center';\n  return loaderEl;\n};\n","import iziToast from 'izitoast';\nimport SimpleLightbox from 'simplelightbox';\n\nimport { getPhoto } from './js/pixabay-api';\nimport { createGalleryElement } from './js/render-functions';\nimport { createLoader } from './js/render-functions';\n\nconst formEL = document.querySelector('.form');\nconst galleryList = document.querySelector('.gallery');\nconst btnLoadMore = document.querySelector('.load-more-btn');\nconst iziToastCommonOptions = { position: 'topRight', messageSize: 20 };\nlet simplelightbox;\nlet perPage = 15;\nlet pageNumber;\nlet searchedThema = '';\nconst loaderEl = createLoader();\nlet galleryItemEl;\n\nconst onSimpleLightBox = () => {\n  simplelightbox = new SimpleLightbox('.gallery a', {\n    captionsData: 'alt',\n    captionDelay: 250,\n  });\n  simplelightbox.refresh();\n};\n\nconst onScroll = () => {\n  const { height } = galleryItemEl.getBoundingClientRect();\n  window.scrollBy({\n    top: height * 2,\n    behavior: 'smooth',\n  });\n};\n\nconst createGallery = async e => {\n  e.preventDefault();\n  btnLoadMore.classList.add('is-hidden');\n  btnLoadMore.removeEventListener('click', onLoadMore);\n  pageNumber = 1;\n  galleryList.insertAdjacentElement('afterend', loaderEl);\n\n  searchedThema = e.target.elements[0].value.trim();\n\n  if (searchedThema === '') {\n    iziToast.warning({\n      ...iziToastCommonOptions,\n      message: 'Input please the data',\n    });\n    loaderEl.remove();\n    return;\n  }\n\n  try {\n    const {\n      data: { hits: photoArray, totalHits: maxPhotoCount },\n    } = await getPhoto(searchedThema, pageNumber, perPage);\n\n    formEL.reset();\n\n    if (photoArray.length === 0) {\n      iziToast.show({\n        ...iziToastCommonOptions,\n        message: `Sorry, there are no images matching your search query ${searchedThema}. Please try again!`,\n      });\n      galleryList.innerHTML = '';\n      return;\n    }\n\n    const galleryItems = photoArray\n      .map(el => createGalleryElement(el))\n      .join('');\n    galleryList.innerHTML = galleryItems;\n\n    if (pageNumber * perPage < maxPhotoCount) {\n      btnLoadMore.classList.remove('is-hidden');\n      btnLoadMore.addEventListener('click', onLoadMore);\n    }\n\n    onSimpleLightBox();\n  } catch (err) {\n    console.log(err);\n    iziToast.error({\n      ...iziToastCommonOptions,\n      message: err.message,\n    });\n  } finally {\n    loaderEl.remove();\n  }\n};\n\nconst onLoadMore = async () => {\n  try {\n    pageNumber++;\n    btnLoadMore.classList.add('is-hidden');\n    galleryList.insertAdjacentElement('afterend', loaderEl);\n\n    const {\n      data: { hits: photoArray, total: maxPhotoCount },\n    } = await getPhoto(searchedThema, pageNumber, perPage);\n\n    const galleryItems = photoArray\n      .map(el => createGalleryElement(el))\n      .join('');\n    galleryList.insertAdjacentHTML('beforeend', galleryItems);\n\n    galleryItemEl = galleryList.firstChild;\n    onScroll();\n    onSimpleLightBox();\n\n    if (pageNumber * perPage >= maxPhotoCount) {\n      btnLoadMore.classList.add('is-hidden');\n      btnLoadMore.removeEventListener('click', onLoadMore);\n\n      iziToast.show({\n        ...iziToastCommonOptions,\n        message: `You have uploaded all images for your request ${searchedThema}`,\n      });\n    } else {\n      btnLoadMore.classList.remove('is-hidden');\n    }\n  } catch (err) {\n    iziToast.error({\n      ...iziToastCommonOptions,\n      message: err.message,\n    });\n  } finally {\n    loaderEl.remove();\n  }\n};\n\nformEL.addEventListener('submit', createGallery);\n"],"names":["getPhoto","query","page","perPage","axios","createGalleryElement","smallImg","largeImg","alt","likes","views","comments","downloads","createLoader","loaderEl","formEL","galleryList","btnLoadMore","iziToastCommonOptions","simplelightbox","pageNumber","searchedThema","galleryItemEl","onSimpleLightBox","SimpleLightbox","onScroll","height","createGallery","e","onLoadMore","iziToast","photoArray","maxPhotoCount","galleryItems","el","err"],"mappings":"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"}